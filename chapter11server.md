- webサーバーと通信する流れ
  - クライアントがTCP SYNパケットを送る
  - サーバーがTCP SYN ACKパケットを返す
  - クライアントがTCP ACKパケットを返す。connectシステムコールが成功する
  - サーバーがacceptシステムコールでクライアントとの通信用のTCPソケットを作る
  - クライアントがTCPソケットにwriteしてHTTPリクエストする
  - サーバーがHTTPリクエストをTCPソケットから読み込んで、レスポンスをTCPソケットにwriteする
  - サーバーがTCPソケットをcloseする
  - クライアントがTCPソケットからHTTPレスポンスを受け取って、画面に表示して、closeする

単一のwebサーバーには限界がある。TCP接続数、メモリ、CPU、ネットワーク
サーバーのスペックを上げるスケールアップとサーバーの数を増やすスケールアウトがある
スケールアップには限界がある。購入可能な最大スペックでも足りない場合やネットワーク帯域が足りない場合など

アプリケーションサーバーを複数台用意する
振り分ける方法は順番に行うラウンドロビンや、負荷を見て振り分ける方法などがある
リクエストの種類に応じて使うアプリケーションサーバーを選んだりもできる
webサーバーをリバースプロキシという。ユーザーの代わりにHTTPリクエストを行ってくれるHTTP Proxyと流れが逆なため

webサーバーのプレゼンテーション層、アプリケーションサーバーのアプリケーション層、データベースのデータ層に分ける構造があるある。個別にスケールアウトできるのが良い。

webサーバーのスケールアウトもできる
DNSサーバーは複数のIPアドレスを返すことができるので、それをしたり。
または、相手の使うキャッシュDNSサーバーを見て、返すIPアドレスを変えたりする方法とか。ただ、キャッシュDNSサーバーとCDNの相性の問題などがあるらしい

ロードバランサ
入口となった、複数のwebサーバーに振り分ける
可能な限り同じHTTPセッションを同じサーバーにしたり、負荷を見て振り分けたりできる

CDN
ユーザー数が多かったり、ユーザーが様々な場所に散らばっている場合、必要になってくる
画像とかあるコンテンツだけCDNで配信したり。
CDNの使い方は色々あるが、名前解決先をCDNサーバーにする方法などがある
データはオリジンサーバーからコピーする方法や、CDNサーバーがオリジンサーバーに問い合わせる方法など
コンテンツやサービスに応じて、別のCDNを使うなど、複数のCDNを使うこともある

物理サーバー以外に、仮想サーバー、クラウド、仮想ネットワークなどもある